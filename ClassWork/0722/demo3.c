/****************************************************************************************************************************************************************
 * @file         : /ClassWork/0722/demo3.c
 * @brief        :
 *                 小练习：设计一个函数，分配size个int大小的空间，并在主函数往空间上赋值1(size的数值)
 * @author       : a_23456@foxmail.com
 * @date         : 2024-07-22 16:50:58
 * @version      : 1.0
 * @note         :
 * @Copyright    : (c)   2024-2025   a_23456@foxmail.com   All Right Reserved
 *****************************************************************************************************************************************************************/

#include <stdio.h>
#include <stdlib.h>

/****************************************************************************************************************************************************************
 * @name         : allocateIntArray
 * @brief        : 分配大小为size的int数组，并将指针返回给调用者
 * @param {int**} p - 指向指针的指针，用于返回分配的内存地址
 * @param {int} size - 需要分配的int元素数量
 * @return       : 无
 * @date         : 2024-07-22 16:50:58
 * @version      : 1.0
 * @note         :
 *****************************************************************************************************************************************************************/
void allocateIntArray(int **p, int size) {
  *p = (int *)calloc(size, sizeof(int));
}

int main(int argc, const char *argv[]) {
  int *arr = NULL; // 定义一个指针，用于接收分配的内存地址
  int size = 5;    // 分配5个int大小的空间

  allocateIntArray(&arr, size); // 调用函数分配内存

  // 检查内存分配是否成功
  if (arr == NULL) {
    printf("内存分配失败\n");
    return 1;
  }

  // 将内存块赋值为1
  for (int i = 0; i < size; i++) {
    arr[i] = 1;
  }

  // 打印数组内容以验证
  for (int i = 0; i < size; i++) {
    printf("arr[%d] = %d\n", i, arr[i]);
  }

  // 释放分配的内存
  free(arr);

  return 0;
}
